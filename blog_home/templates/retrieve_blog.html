<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


    {% if messages %}
    <div class="container fixed-top" style="margin-top: 60px;">
       {% for message in messages %}
       <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert" id="message_box">
           {{ message }}
         
       </div>
       {% endfor %}
    </div>
    {% endif %}
    <script>
        var message_tag = document.getElementById("message_box");
        
        setTimeout(function(){ 
           message_tag.style.display = "none"; 
        }, 3000);    
        
        </script>
    

    <script>
        function saveContent2() {
            console.log("in function")
            // Prevent the default form submission
            var editableText = document.getElementById("editableText");
                                var editButton = document.getElementById("editButton");
                                var saveButton = document.getElementById("saveButton");
                                var textInput = document.getElementById('hiddenContent24');
                                console.log(textInput)
                                // if (editableText.contentEditable === "false") {
                                    editableText.style.display= "block";
                                    textInput.style.display = "none";
                                    editButton.style.display = "block";
                                    saveButton.style.display = "none";
                                    console.log(textInput.value)
                                    editableText.textContent=textInput.value



            event.preventDefault();
            var hiddenInput = document.getElementById("hiddenContent2");
            // Get the form element
            const form = document.getElementById("saveForm");
            console.log(form)
            // Get the form action URL
            const url = form.getAttribute("action");
            
            // Get the form method (POST)
            const method = form.getAttribute("method");

            // Create a FormData object to gather form data
        
// Create a FormData object to gather form data
            const formData = new FormData(form);
            console.log(formData)
// Append the CSRF token to the FormData object
            

            // Make the fetch request
            fetch('{%  url "blog_home:updateyoursuggestion" %}', {
                method: method,
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Handle the response data here
                console.log(data);
                hiddenInput.value = data.updated_text
            })
            .catch(error => {
                // Handle errors here
                console.error("Error:", error);
            });
        }
    </script>



    {% include 'navbar.html' %}
            <div class="container" style="width: 50%; min-width: 400px; margin-left: 20%;;margin-top: 5%;">
              
                <div>

                <img src="{{blog_post.blog_title_image.url}}" id="previewImage"  class="img-fluid" alt="Uploaded Image" style="border-radius: 2%; margin-top: 50px;min-width: 200px; margin-left: 10%; height: 200px; width: 60%;">
               </div>
               <div style="margin-top: 4%; width: 80%;">
                <b  style="font-size: 160%;">{{ blog_post.title }}</b>
                </div>
                <h2 style="font-size: 16px; color: #999;">by : {{ blog_post.user.name }}</h2>
                <h2 style="font-size: 16px; color: #999;">Date : {{ blog_post.created_at.date }}</h2>
                
                <p>{{ blog_post.content|safe }}</p>
             <div>
                <div class="row" style="width:200px">
                    <div class="col-md-6 mb-2">
                        <button type="button" class="btn" data-toggle="modal" data-target="#exampleModalCenter">
                            <i class="fas fa-flag" style="color: red; font-size: 28px;"></i> 
                        </button>
                    </div>
                    <div class="col-md-6" style="margin-left: -15%;">
                     
                        <form id="likepost" class="like-form1" method="POST" action="{% url 'blog_home:likepost' %}">
                            <input type="hidden" id="hiddenContent278" name="blog_id" value="{{blog_post.id}}">
                          
                          
                            {% csrf_token %}
                            <button type="submit" class="btn" style="background-color: white;"  id="likeButton" title="Like it">
                                <i class="fas fa-thumbs-up" id="th1" style="color: {% if session_user in blog_post.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 28px;"></i>
                            <div>
                                 <p id="likesCount">{{blog_post.isLiked.all.count}}</p>
                            </div>
                            </button>
                        
                        </form>
                  
                    </div>
               
                      
                    
                </div>
                
             
                
                  </div>
            </div>


      
            <div class="modal fade" id="exampleModalCenter_see_your_suggestion" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Your Suggestion</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body" style="margin-bottom: 5%;">
                        {% for suggestion in all_suggestions %}
                        {% if suggestion.user.id == session_user.id %}
                        {% if suggestion.is_reply == False %}
                        <div class="card" style="width: 26rem; margin-top: 2%;">
                        <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: -13px;">
                        
                          <div>
                              <img src="{{suggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px;height:50px">
                              <h5 class="mb-1" style="font-size: 16px;">{{ suggestion.user.name }}</h5>
                          </div>
                          
                        
                          <div class="card flex" style="display: flex; background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: 1%; height: 60px; border-radius: 35px; padding: 10px;">
                          

                           
                            
                            <form id="saveForm"  method="POST"  >
                            <p id="editableText" style="margin-left: 5%; width: 100%;"  contenteditable="false" value="suggestion.text">{{suggestion.text}}</p>
                            <input  style="display: none;" label="Text here" id="hiddenContent24" name="text" value="{{suggestion.text}}">
                            <input type="hidden" id="hiddenContent1" name="suggestion_id" value="{{suggestion.id}}">
                            <div style="margin-top: 20px;margin-left: 100px;">
                                <button id="saveButton" class="btn" style="display: none;" onclick="saveContent2()">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                            
                         
                            
                        </form>

                   <div style="display: flex;">
                        <button id="editButton" class="btn" onclick="toggleEditable()">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn reply-button" data-toggle="collapse" data-target="#replyFormSuggestion{{suggestion.id}}" title="reply">
                            <i class="fas fa-reply" style="color: green; font-size: 16px;"></i>
                        </button>
</div>




                 
                        </div>
                        
                        <script>
      
                            function toggleEditable() {
                                console.log("we are inhere")
                                var editableText = document.getElementById("editableText");
                                var editButton = document.getElementById("editButton");
                                var saveButton = document.getElementById("saveButton");
                                var textInput = document.getElementById('hiddenContent24');
                                console.log(textInput)
                                // if (editableText.contentEditable === "false") {
                                    editableText.style.display= "none";
                                    textInput.style.display = "block";
                                    editButton.style.display = "none";
                                    saveButton.style.display = "inline-block";
                                
                                // } else {
                                    // editableText.contentEditable = "false";
                                    // editButton.style.display = "inline-block";
                                    // saveButton.style.display = "none";
                                // }
                            }
                        
                            function saveContent() {
                                var editableText = document.getElementById("editableText");
                                var editButton = document.getElementById("editButton");
                                var saveButton = document.getElementById("saveButton");
                                
                                // Save the content or perform any other action here
                                
                                editableText.contentEditable = "false";
                                editButton.style.display = "inline-block";
                                saveButton.style.display = "none";
                            }
                        </script>
                        

                      </div>
                      <div id="replyFormSuggestion{{ suggestion.id }}" class="collapse mt-2">
                        <form class="reply-form-your-suggestion" data-parent="{{ suggestion.id }}"  >
                            <!-- Your reply form fields here -->
                            <!-- <label for="comment">Reply</label> -->
                            <input type="hidden" id="hiddenContent" name="parent" value="{{ suggestion.id }}">
                            <input type="hidden" id="hiddenContent" name="blog_id" value="{{ blog_post.id }}">
                           

                            <div class="input-group mb-3">
                                <div class="input-group mb-3">
                                    <textarea class="form-control" id="comment" name="text" rows="1" required></textarea>
                                    <div class="input-group-append">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-primary">Submit Reply</button>
                                    </div>
                                </div>
                                </div>
                                
                        </form>
                        <div class="your-suggest-replies-container">
                      {% for replysuggestion in all_suggestions %}
                      {% if replysuggestion.is_reply == True %}
                          {% if replysuggestion.parent.id == suggestion.id %}
                          <div class="align-items-center" style="margin-left: 10%; margin-top: 5%;">
                          
                              <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: 2px;">
                             
                                  <div>
                                      <img src="{{replysuggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px;">
                                      <h5 class="mb-1" style="font-size: 12px;">{{ replysuggestion.user.name }}</h5>
                                  </div>
                               
                                  <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: 1%;height: 60px; border-radius: 35px; padding: 10px;">
                                      <p style="margin-left: 5%; width: 100%;">{{ replysuggestion.text }}</p>
              
                                  </div>
                              </div>
                              <div class="btn-container" style="box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); height: 40px; margin-left: 20%; width: 40%; border-radius: 35px;">
                                <div class="row" style="width: 100%; margin-left: 5%;">
                                
                               
                                    <div class="col-md-4" style="margin-left: -8%;">
                                   
                                        <form id="blogreport" class="like-reply-suggest-form" >
                                            <input type="hidden" id="hiddenContent2" name="blog_id" value="{{blog_post.id}}">
                                            <input type="hidden" id="hiddenContent2" name="suggestion_id" value="{{replysuggestion.id}}">
                                           
                                            {% csrf_token %}
                                            <button type="submit"  class="btn" style="background-color: white;"  id="likeButton" title="Like it">
                                                {% csrf_token %}
                                                <i class="fas fa-thumbs-up" id="btn_like_reply_suggest" style="color: {% if session_user in replysuggestion.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>                           
                                                <p class="likes-count">{{replysuggestion.isLiked.all.count}}</p>                        
                                            </button>
                                         
                                        </form>
                                    </div>
                                
                                </div>
                                </div> 
                            </div>
                              {% endif %}
                              {% endif %}
                          {% endfor %}

<script>
const likereplysuggest = document.querySelectorAll('.like-reply-suggest-form');

likereplysuggest.forEach(form => {
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(form);
       
        fetch('{% url "blog_home:likesuggestion" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
          
            }
        })
        .then(response => response.json())
        .then(data => {
            // Update the like count on the page
            console.log(data.likes)
        
            // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
           //  console.log(fas)
            var likesCountElement4 = form.querySelector('.likes-count');

            

            likesCountElement4.textContent = data.likes;
            if (data.isliked==1) {
                console.log("color blue")
                     thumbsUpIcon.style.color = "grey";
              }
              else{
                console.log("color grey")
                thumbsUpIcon.style.color = "blue";
              }
        });
    });
});
      

</script>
                        
                   </div>
                        </div> 
                  </div>
                  {% endif %}
                        {% endif %}
                      {% endfor%}
                      <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            
                            const replyForms13 = document.querySelectorAll('.reply-form-your-suggestion');
                            console.log(replyForms13)
                            replyForms13.forEach(form => {
                                form.addEventListener('submit', async function(event) {
                                    event.preventDefault();
                                    console.log("In the script")
                                    const formData = new FormData(form);
                                    const parentCommentId = form.getAttribute('data-parent');
                                    console.log(parentCommentId)
                    
                                    try {
    
                                        const response = await fetch('{% url "blog_home:replysuggestion"  %}', {
                                            method: 'POST',
                                            body: formData,
                                            headers: {
                                                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                                'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                                            }
                                        });
                                        console.log("request made")
                                        if (response.ok) {
                                            const data = await response.json();
                                            console.log(data)
                                            // Update the replies container with the new reply
                                            const repliesContainer = document.querySelector(`[data-parent="${parentCommentId}"] + .your-suggest-replies-container`);
                                            console.log("just assigning template")
                                            console.log(data["updated_replies_html"])
                                            repliesContainer.innerHTML = data["updated_replies_html"] // Assuming the server returns the updated HTML for replies
                                   
                                   
                                                            
const likereplysuggest = document.querySelectorAll('.like-reply-suggest-form');

likereplysuggest.forEach(form => {
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(form);
       
        fetch('{% url "blog_home:likesuggestion" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
          
            }
        })
        .then(response => response.json())
        .then(data => {
            // Update the like count on the page
            console.log(data.likes)
        
            // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
           //  console.log(fas)
            var likesCountElement4 = form.querySelector('.likes-count');

            

            likesCountElement4.textContent = data.likes;
            if (data.isliked==1) {
                console.log("color blue")
                     thumbsUpIcon.style.color = "grey";
              }
              else{
                console.log("color grey")
                thumbsUpIcon.style.color = "blue";
              }
        });
    });
});
                                 
                                   
                                   
                                   
                                   
                                   
                                        }
                                    } catch (error) {
                                        console.error(error);
                                    }
                                });
                            });
                        });
                    </script>
                      <!-- Display existing suggestions and replies here -->
                    </div>
                  </div>
                </div>
              </div>
              




<!-- 
              <div class="modal fade" id="exampleModalCenter_see_your_suggestion" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Your Suggestion</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                        {% for suggestion in all_suggestions %}
                          {% if suggestion.user.id == session_user.id %}
                          <div class="card" style="width: 26rem; margin-top: 2%;">
                          <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: -13px;">
                          
                            <div>
                                <img src="{{suggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px;">
                                <h5 class="mb-1" style="font-size: 16px;">{{ suggestion.user.name }}</h5>
                            </div>
                            
                          
                            <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: 1%;height: 60px; border-radius: 35px; padding: 10px;">
                                <p style="margin-left: 5%; width: 100%;">{{ suggestion.text }}</p>
        
                            </div>
                        </div>
                        {% for replysuggestion in all_suggestions %}
                        {% if replysuggestion.is_reply == True %}
                            {% if replysuggestion.parent.id == suggestion.id %}
                            <div class="align-items-center" style="margin-left: 10%; margin-top: 5%;">
                            
                                <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: 2px;">
                               
                                    <div>
                                        <img src="{{replysuggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px;">
                                        <h5 class="mb-1" style="font-size: 12px;">{{ replysuggestion.user.name }}</h5>
                                    </div>
                                 
                                    <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: 1%;height: 60px; border-radius: 35px; padding: 10px;">
                                        <p style="margin-left: 5%; width: 100%;">{{ replysuggestion.text }}</p>
                
                                    </div>
                                </div>

                                {% endif %}
                                {% endif %}
                            {% endfor %}
                        </div>
                        
                    </div>
                          {% endif %}
                        {% endfor%}
                    </div>
                    
                  </div>
                </div>
              </div> -->









        





              <div class="modal fade" id="exampleModalCenter_see_suggestions" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Suggestions by Readers</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body" >
                        {% for suggestion in all_suggestions %}
                        {% if suggestion.is_reply == False %}
                         <div class="card" style="width: 26rem; margin-top: 2%;">
                            <div class="card-body">
                              
                              
                              
                                <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: -13px;">
                                    <!-- Left div with user avatar and name -->
                                    <div>
                                        <img src="{{suggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 75px;  height: 60px;">
                                        <h5 class="mb-1" style="font-size: 14px;">{{ suggestion.user.name }}</h5>
                                    </div>
                                    
                                    <!-- Right div with comment content -->
                                    <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: 1%;height: 60px; border-radius: 35px; padding: 10px;">
                                        <p style="margin-left: 5%; width: 100%;">{{ suggestion.text }}</p>
                
                                    </div>
                                </div>







                                <div class="btn-container" style="display:flex; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); height: 30px; width:140px ;margin-left: 20%;  border-radius: 35px;">
                                 
                                            <button type="reply-button-suggest" class="btn " data-toggle="collapse" data-target="#replyForm{{ suggestion.id }}">
                                                <i class="fas fa-reply" style="color: green;font-size: 16px;"></i> 
                                              </button>
                                      
                                    
                                            <form id="blogreport" method="POST" action="{% url 'blog_home:rejectsuggestion' %}"> 
                    
                                                <input type="hidden" id="hiddenContent45" name="suggestion_id" value="{{suggestion.id}}">
                                                <input type="hidden" id="hiddenContent5" name="blog_id" value="{{blog_post.id}}">
                                                {% csrf_token %}
                                                <button  type="submit" class="btn ">
                                                    <i class="fas fa-times" style="color: red;"></i> 
                                                  </button>
                                        </form>
                                
                                         
                                            <form id="blogreport" class="like-suggest" method="POST" action="{% url 'blog_home:likesuggestion' %}">
                                                <input type="hidden" id="hiddenContent4" name="blog_id" value="{{blog_post.id}}">
                                                <input type="hidden" id="hiddenContent5" name="suggestion_id" value="{{suggestion.id}}">
                                              
                                                {% csrf_token %}
                                                <button type="submit" class="btn"  style="background-color: white;"  id="likeButton" title="Like it">
                                                    <i class="fas fa-thumbs-up"  id="btn_like_suggest" style="color: {% if session_user in suggestion.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>                           
                                                    <p class="th">{{suggestion.isLiked.all.count}}</p>                    
                                                </button>
                                          
                                            </form>
                                     
                                        <script>
                                            document.addEventListener('DOMContentLoaded', function() {
                                                const likesuggest = document.querySelectorAll('.like-suggest');
                                        
                                                likesuggest.forEach(form => {
                                                    form.addEventListener('submit', function(event) {
                                                        event.preventDefault();
                                        
                                                        const formData = new FormData(form);
                                        
                                                        fetch('{% url "blog_home:likesuggestion" %}', {
                                                            method: 'POST',
                                                            body: formData,
                                                            headers: {
                                                                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                                                'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                                                            }
                                                        })
                                                        .then(response => response.json())
                                                        .then(data => {
                                                            // Update the like count on the page
                                                            console.log(data.likes)
                                                            const likeCountSpan = form.querySelector('.like-count');
                                                            if (likeCountSpan) {
                                                                likeCountSpan.textContent = data.likes;
                                                            }
                                                          
                                                            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
                                                            var likesCountElement = form.querySelector('.th');
                    
                     
                    
                                                            likesCountElement.textContent = data.likes;
                                                            if (data.isliked==1) {
                                                                     console.log("color blue")
                                                                     thumbsUpIcon.style.color = "grey";
                                                              }
                                                              else{
                                                                console.log("color grey")
                                                                thumbsUpIcon.style.color = "blue";
                                                              }
                                                        });
                                                    });
                                                });
                                            });
                                        </script>



                                 
                                    </div>






                              <div class="container mt-4">

                               
                                <div id="replyForm{{ suggestion.id }}" class="collapse mt-2">
                                    <form class="reply-form-suggestion1" data-parent="{{ suggestion.id }}"  >
                                        <!-- Your reply form fields here -->
                                        <!-- <label for="comment">Reply</label> -->
                                        <input type="hidden" id="hiddenContent" name="parent" value="{{ suggestion.id }}">
                                        <input type="hidden" id="hiddenContent" name="blog_id" value="{{ blog_post.id }}">
                                       

                                        <div class="input-group mb-3">
                                            <div class="input-group mb-3">
                                                <textarea class="form-control" id="comment" name="text" rows="1" required></textarea>
                                                <div class="input-group-append">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-primary">Submit Reply</button>
                                                </div>
                                            </div>
                                            </div>
                                            
                                    </form>
                                
                                
                              
                                <div class="replies-container2">
                        {% for replysuggestion in all_suggestions %}
                            {% if replysuggestion.is_reply == True %}
                                {% if replysuggestion.parent.id == suggestion.id %}
                                <div class="align-items-center" style="margin-left: 10%; margin-top: 5%;">
                                    <!-- Left div with image -->
                                    <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: 2px;">
                                        <!-- Left div with user avatar and name -->
                                        <div class="container">
                                            <img src="{{replysuggestion.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px; height: 50px;">
                                            <h5 class="mb-1" style="font-size: 12px;">{{ replysuggestion.user.name }}</h5>
                                        </div>
                                        
                                        <!-- Right div with comment content -->
                                        <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 100%; margin-left: -140px; border-radius: 35px; padding: 10px;">
                                            <p style="margin-left: 5%; width: 100%;">{{ replysuggestion.text }}</p>
                    
                                        </div>
                                    </div>
                                    


                                    <div class="btn-container" style="box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); height: 40px; margin-left: 20%; width: 40%; border-radius: 35px;">
                                        <div class="row" style="width: 100%; margin-left: 5%;">
                                
                                            <div class="col-md-4" style="margin-left: -8%;">
                                           
                                                <div></div>
                                                <form id="blogreport" class="like-reply-suggest" method="POST" action="{% url 'blog_home:likesuggestion' %}">
                                                    <input type="hidden" id="hiddenContent2" name="blog_id" value="{{blog_post.id}}">
                                                    <input type="hidden" id="hiddenContent2" name="suggestion_id" value="{{replysuggestion.id}}">
                                                   
                                                    {% csrf_token %}
                                                    <button type="submit"  class="btn" style="background-color: white;"  id="likeButton" title="Like it">
                                                        <i class="fas fa-thumbs-up" id="btn_like_reply_suggest" style="color:  {% if session_user in replysuggestion.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>                           
                                                        <p class="th">{{replysuggestion.isLiked.all.count}}</p>                        
                                                    </button>
                                                 
                                                </form>
                                            </div>
                               
                                        </div>
                                        </div>
    







                                    
                                 
                                </div>
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const likereplysuggest = document.querySelectorAll('.like-reply-suggest');
                        
                                likereplysuggest.forEach(form => {
                                    form.addEventListener('submit', function(event) {
                                        event.preventDefault();
                                        console.log("in reply suugest")
                                        const formData = new FormData(form);
                        
                                        fetch('{% url "blog_home:likesuggestion" %}', {
                                            method: 'POST',
                                            body: formData,
                                            headers: {
                                                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                                'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                                            }
                                        })
                                        .then(response => response.json())
                                        .then(data => {
                                          
                                            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
                                            var likesCountElement = form.querySelector('.th');
    
     
    
                                            likesCountElement.textContent = data.likes;
                                            if (data.isliked==1) {
                                                     console.log("color blue")
                                                     thumbsUpIcon.style.color = "grey";
                                              }
                                              else{
                                                console.log("color grey")
                                                thumbsUpIcon.style.color = "blue";
                                              }
                                        });
                                    });
                                });
                            });
                        </script>
                    </div>
                                </div>
                                </div>
                              </div>





                            </div>
                        
                          {% endif %}
                        {% endfor%}
                        <script>
                            document.addEventListener('DOMContentLoaded', function() {
                                const replyForms1 = document.querySelectorAll('.reply-form-suggestion1');
                                console.log(replyForms1)
                                replyForms1.forEach(form => {
                                    form.addEventListener('submit', async function(event) {
                                        event.preventDefault();
                        
                                        const formData = new FormData(form);
                                        const parentCommentId = form.getAttribute('data-parent');
                                        console.log(parentCommentId)
                        
                                        try {

                                            const response = await fetch('{% url "blog_home:replysuggestion"  %}', {
                                                method: 'POST',
                                                body: formData,
                                                headers: {
                                                    'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                                    'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                                                }
                                            });
                                            console.log("request made")
                                            if (response.ok) {
                                                const data = await response.json();
                                                console.log(data)
                                                // Update the replies container with the new reply
                                                const repliesContainer = document.querySelector(`[data-parent="${parentCommentId}"] + .replies-container2`);
                                                console.log("just assigning template")
                                                console.log(data["updated_replies_html"])
                                                repliesContainer.innerHTML = data["updated_replies_html"] 
                                                
                                                
                                                
const likereplysuggest = document.querySelectorAll('.like-reply-suggest-form');

likereplysuggest.forEach(form => {
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(form);
       
        fetch('{% url "blog_home:likesuggestion" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
          
            }
        })
        .then(response => response.json())
        .then(data => {
            // Update the like count on the page
            console.log(data.likes)
        
            // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
           //  console.log(fas)
            var likesCountElement4 = form.querySelector('.likes-count');

            

            likesCountElement4.textContent = data.likes;
            if (data.isliked==1) {
                console.log("color blue")
                     thumbsUpIcon.style.color = "grey";
              }
              else{
                console.log("color grey")
                thumbsUpIcon.style.color = "blue";
              }
        });
    });
});
                                         
                                                
            
                                                
                                                
                                                
                                                
                                                
                                                
                                                
                                                
                                                
                                                
                                                
                                                // Assuming the server returns the updated HTML for replies
                                            }
                                        } catch (error) {
                                            console.error(error);
                                        }
                                    });
                                });
                            });
                        </script>
                    </div>
                    
                  </div>
                </div>
              </div>






              
            <div class="container">
                <div class="card floating-card fixed-top float-left" style="margin-top: 20%; margin-left:70%;width: 20%;">
                    <div class="card-body">
                        <h5 class="card-title">Suggestion Card</h5>
                        <!-- <p class="card-text">This card will move up and down as you scroll.</p> -->
                        {% if session_user != blog_post.user %}
                        {% if not hassuggestion %}
                        <div>
                        <button type="button" class="btn " data-toggle="modal" style="background-color:  #000F1F;color: lightgrey;font-weight: bold;" data-target="#exampleModalCenter_add_suggestion">
                            Suggest
                          </button>
                        </div>
                          <!-- Modal -->
                   
                          {% endif %}
                          {% endif %}
                        
                          {% if session_user != blog_post.user %}
                          {% if hassuggestion %}
                          <div style="margin-top: 2%;">
                                <button class="btn  " style="background-color:  #000F1F;color: lightgrey;font-weight: bold; width: 80%;" data-toggle="modal" data-target="#exampleModalCenter_see_your_suggestion">
                                 your Suggestion
                                 </button>
                                </div>
                                {% endif %}
                          {% endif %}
                        {% if session_user == blog_post.user %}
                        <div style="margin-top: 2%;">
                         <button class="btn " style="background-color:  #000F1F;color: lightgrey;font-weight: bold; width: 40%;" data-toggle="modal" data-target="#exampleModalCenter_see_suggestions">
                            See Suggestion by Users
                         </button>
                         </div>
                        {% endif %} 
                    
                    </div>
                </div>
            </div>
            
            <div class="modal fade" id="exampleModalCenter_add_suggestion" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Add Suggestion</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="{% url 'blog_home:addsuggestion'%}" method="POST">
                                {% csrf_token %}
                                <div class="form-group">
                                    <input type="hidden" id="hiddenContent70" name="blog_id" value="{{blog_post.id}}">
                                    <label for="suggestionText">Suggestion:</label>
                                    <textarea class="form-control" id="suggestionText" name="text" rows="4" required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <form id="blogreport" method="POST" action="{% url 'blog_home:reportcomment' %}"> 
                    
                <input type="hidden" id="hiddenContent2" name="blog_id" value="{{blog_post.id}}">
                {% csrf_token %}
                <button  type="submit"  class="btn btn-secondary">
                <i class="fas fa-flag"></i> Report
            </button>
        </form> -->


     
          
          <!-- Modal -->
          <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Report Post</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form method="POST" action="{% url 'blog_home:reportpost' %}">
                    <div class="form-group">
                      <label for="messageInput">Message</label>
                      <input type="text" class="form-control" id="messageInput" name="message" placeholder="Enter your message" required>
                      <input type="hidden" id="hiddenContent2" name="blog_id" value="{{blog_post.id}}">
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                       
                      </div>
                     
                    </div>
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Submit Report</button>
                  </form>
                </div>
                
              </div>
            </div>
          </div>






    <div style="margin-top: 2%;;">
        <b style="font-size: 24px; font-family: 'Arial', sans-serif; color: #333;  margin-left: 5%">Comments Section :</b>
<form id="commentForm" method="POST" action="{% url 'blog_home:retrieveblog' id=blog_post.id %}" enctype="multipart/form-data">
    
    <div class="form-group" style="margin-top: 1%;">

        <!-- <label for="comment">Comment</label> -->
        <textarea class="form-control" id="comment" name="text" style="width: 60%; margin-left: 5%;" rows="3" placeholder="Comment Anything" required></textarea>
    </div>
    <input type="hidden" id="hiddenContent" name="parent" value="normal comment" >
    {% csrf_token %}
    <div class="input-group" style="margin-left: 5%;width: 20%;">
        <input type="file" class="form-control" name="attachment" id="inputGroupFile02">
        <!-- <label class="input-group-text" for="inputGroupFile02">Upload</label> -->
    </div>
            <button type="submit" class="btn" style="margin-left: 5%; margin-top: 1%;background-color:  #000F1F;color: lightgrey;font-weight: bold;">Submit Comment</button>
    
        
        
    
    
</form>

<div class="mt-4">

    <ul class="list-group">
        {% for comment in all_comments %}
         {% if comment.is_reply == False %}

        
            <div class="align-items-center" style="margin-top: 30px; margin-left: 5%;">
                <!-- Left div with image -->




            
    







                <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: -13px ;width: 60%;">
                    <!-- Left div with user avatar and name -->
                    <div>
                        <img src="{{comment.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 80px; height: 50px;">
                        <h5 class="mb-1" style="font-size: 16px;">{{ comment.user.name }}</h5>
                    </div>
                    
                    <!-- Right div with comment content -->
                    <div class="container" >
                        <div class="card" style="background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);width:30% ; border-radius: 35px; padding: 10px; min-width: 150px;">
                            <p style="width: 100%; word-wrap: break-word;">{{ comment.text }}</p>
                          </div>
                          
                    {% if comment.attachment %}
                  
                      <!-- {% if comment.attachment.url|slice:"-3"|lower in "jpg jpeg png gif" %}
                        <img src="{{ comment.attachment.url }}" alt="" class="normal" style="width: 20%; height: 70px; margin-left: 3%; margin-bottom: 3%;">
                      {% else %} -->
                         <p>Attachment: {{ comment.attachment }}</p>
                      {% endif %}
                  
                  {% endif %}
                    </div>
                </div>
               
           


<div style="margin-left: 140px; margin-top: -20px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 150px;height:30px;border-radius: 35px; ">
                 
                        <button class="btn reply-button" data-toggle="collapse" data-target="#replyForm{{ comment.id }}">
                            <i class="fas fa-reply" style="color: green; font-size: 16px;"></i>
                        </button>
                   
                    
                        <button type="button" class="btn" data-toggle="modal" data-target="#exampleModalCenter1{{comment.id}}">
                            <i class="fas fa-flag" style="color: red; font-size: 16px;"></i>
                        </button>
                        {% csrf_token %}
                    
                    
                        <form id="blogreport" class="like-comment">
                            {% csrf_token %}
                            <button type="submit" class="btn" id="likeButton" title="Like it" style="margin-top: -35px;margin-left: 90px;">
                                <i class="fas fa-thumbs-up" id="btn-like-comment" style="color: {% if session_user in comment.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>
                                <p class="th">{{comment.isLiked.all.count}}</p>
                            </button>
                            <input type="hidden" id="hiddenContent9" name="blog_id" value="{{blog_post.id}}">
                            <input type="hidden" id="hiddenContent10" name="comment_id" value="{{comment.id}}">
                          
                        </form>
                   

                    </div>
                    </div>
                    <!-- <div class="btn-container" style="box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width:180px; height: 40px; margin-left: 10%; border-radius: 35px;">
                        <div class="row justify-content--md-end">
                            <div class="col-md-4">
                                <button class="btn reply-button" data-toggle="collapse" data-target="#replyForm{{ comment.id }}">
                                    <i class="fas fa-reply" style="color: green; font-size: 16px;"></i>
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button type="button" class="btn" data-toggle="modal" data-target="#exampleModalCenter1">
                                    <i class="fas fa-flag" style="color: red; font-size: 16px;"></i>
                                </button>
                            </div>
                            <div class="col-md-4">
                                <form id="blogreport" class="like-comment">
                                    <input type="hidden" id="hiddenContent2" name="blog_id" value="{{blog_post.id}}">
                                    <input type="hidden" id="hiddenContent2" name="comment_id" value="{{comment.id}}">
                                    {% csrf_token %}
                                    <button type="submit" class="btn" id="likeButton" title="Like it">
                                        <i class="fas fa-thumbs-up" id="btn-like-comment" style="color: {% if session_user in comment.isLiked.all %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>
                                        <p class="th">{{comment.isLiked.all.count}}</p>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div> -->
                    
                  
                    



                </div>
          
             
                <div class="modal fade" id="exampleModalCenter1{{comment.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLongTitle">Report Comment</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form method="POST" action="{% url 'blog_home:reportcomment' %}">
                            <div class="form-group">
                              <label for="messageInput">Message</label>
                              <input type="text" class="form-control" id="messageInput" name="message" placeholder="Enter your message" required>
                              <input type="hidden" id="hiddenContent4" name="comment_id" value="{{comment.id}}">
                              <input type="hidden" id="hiddenContent4" name="blog_id" value="{{blog_post.id}}">
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary">Submit Report</button>
                              </div>
                             
                            </div>
                          </form>
                        </div>
                        
                      </div>
                    </div>
                  </div>

               

              
     
    
        <div id="replyForm{{ comment.id }}" class="collapse mt-2">
            <form class="reply-form" method="POST" data-parent="{{ comment.id }}" action="{% url 'blog_home:retrieveblog' id=blog_post.id %}">
                <!-- Your reply form fields here -->
                
                    
                    <input type="hidden" id="hiddenContent" name="parent" value="{{ comment.id }}">
                    <div class="input-group mb-3" style="width: 30%; margin-left: 10%;">
                        <input type="hidden" id="hiddenContent4" name="blog_id" value="{{blog_post.id}}">
                        <div class="input-group mb-3">
                            <textarea class="form-control" id="comment" name="text" rows="1"  placeholder="reply here"></textarea>
                            <div class="input-group-append">
                                {% csrf_token %}
                                <button type="submit" class="btn " style="background-color:  #000F1F;color: lightgrey;font-weight: bold;">Submit Reply</button>
                            </div>
                        </div>
                        </div>
            </form>
            <div class="replies-container">
{% for replycomment in all_comments %}
    {% if replycomment.is_reply == True %}
        {% if replycomment.parent.id == comment.id %}
        <div class="align-items-center" style="margin-left: 10%; margin-top: 3%;">
        

            <div class="comment-container" style="display: flex; align-items: flex-start; margin-bottom: 5px;">
                <!-- Left div with user avatar and name -->
                <div>
                    <img src="{{replycomment.user.profile_pic.url}}" alt="User Avatar" class="rounded-circle" style="width: 60px; height: 50px;">
                    <h5 class="mb-1" style="font-size: 12px;">{{ replycomment.user.name }}</h5>
                </div>
                
                <!-- Right div with comment content -->
                <div class="card" style=" background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); width: 200px; margin-left: 1%; border-radius: 35px; padding: 10px;">
                    <p style="margin-left: 5%; width: 100%;">{{ replycomment.text }}</p>

                </div>
            </div>




               
                
            <div class="btn-container" style="display:flex ; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); height: 30px; margin-left: 120px; width: 100px; border-radius: 35px;">
             
                        <button type="button" class="btn " data-toggle="modal" data-target="#exampleModalCenter-reply-comment{{replycomment.id}}">
                            <i class="fas fa-flag" style="color: red;font-size: 16px;"></i> 
                          
                        </button>
                    
                     
                        <form id="blogreport"  class="like-reply-comment" >
                            <input type="hidden" id="hiddenConten7" name="blog_id" value="{{blog_post.id}}">
                            <input type="hidden" id="hiddenContent6" name="comment_id" value="{{replycomment.id}}">
                         
                            {% csrf_token %}
                            <button type="submit" class="btn" id="btn_like_reply_comment" style="background-color: white;"  id="likeButton" title="Like it">
                                <i class="fas fa-thumbs-up" id="btn67" style="color:  {% if replycomment.isLiked.all.count > 0 %}blue{% else %}grey{% endif %}; font-size: 16px;"></i>                           
                                <p class="th" id="text67" >{{replycomment.isLiked.all.count}}</p>   
                                          
                            </button>
                         </form>
                   
                 
               
                </div>
                <div class="modal fade" id="exampleModalCenter-reply-comment{{replycomment.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLongTitle">Report Comment</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <form method="POST" action="{% url 'blog_home:reportcomment' %}">
                            <div class="form-group">
                              <label for="messageInput">Message</label>
                              <input type="text" class="form-control" id="messageInput" name="message" placeholder="Enter your message" required>
                              <input type="hidden" id="hiddenContent4" name="comment_id" value="{{replycomment.id}}">
                              <input type="hidden" id="hiddenContent4" name="blog_id" value="{{blog_post.id}}">
                              <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                {% csrf_token %}
                                <button type="submit" class="btn btn-primary">Submit Report</button>
                              </div>
                             
                            </div>
                          </form>
                        </div>
                        
                      </div>
                    </div>
                  </div>
        </div>
        {% endif %}
    {% endif %}
{% endfor %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const likereplycomment = document.querySelectorAll('.like-reply-comment');
        var parameterFromDjango = "{{ your_parameter }}";  
        likereplycomment.forEach(form => {
            form.addEventListener('submit', function(event) {
                event.preventDefault();

                const formData = new FormData(form);

                fetch('{% url "blog_home:likecomment" %}', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                         // Include CSRF token
                    }
                })
                .then(response => response.json())
                .then(data => {
                    // Update the like count on the page
                    console.log(data.likes)
                
                    // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
                    const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
                    var likesCountElement = form.querySelector('.th');



                    likesCountElement.textContent = data.likes;
                    if (data.isliked==1) {
                        console.log("color blue")
                             thumbsUpIcon.style.color = "grey";
                      }
                      else{
                        console.log("color grey")
                        thumbsUpIcon.style.color = "blue";
                      }
                });
            });
        });
    });
</script>
</div>
        </div>
        {% endif %}   
        {% endfor %}
        <script>
            document.addEventListener('DOMContentLoaded', function() {
             
                const likecomment = document.querySelectorAll('.like-comment');
        
                likecomment.forEach(form => {
                    form.addEventListener('submit', function(event) {
                        event.preventDefault();
                        console.log("not yet clicked")
                        const formData = new FormData(form);
        
                        fetch('{% url "blog_home:likecomment" %}', {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            // Update the like count on the page
                            console.log(data.likes)
                          
                            // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
                            const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
                            var likesCountElement = form.querySelector('.th');

                            console.log("I am here")
                            likesCountElement.textContent = data.likes;
                            if (data.isliked==1) {
                                console.log("color blue")
                                thumbsUpIcon.style.color = "grey";
                                     
                              }
                              else{
                                console.log("color grey")
                                thumbsUpIcon.style.color = "blue";
                              }
                        });
                    });
                });
            });
            </script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const replyForms = document.querySelectorAll('.reply-form');
        
                replyForms.forEach(form => {
                    form.addEventListener('submit', async function(event) {
                        event.preventDefault();
        
                        const formData = new FormData(form);
                        const parentCommentId = form.getAttribute('data-parent');
        
                        try {
                            const response = await fetch('{% url "blog_home:addcomment" %}', {
                                method: 'POST',
                                body: formData,
                                headers: {
                                    'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                    'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                                }
                            });
        
                            if (response.ok) {
                                const data = await response.json();
                                console.log(data)
                                // Update the replies container with the new reply
                                const repliesContainer = document.querySelector(`[data-parent="${parentCommentId}"] + .replies-container`);
                                console.log("just assigning template")
                                console.log(data["updated_replies_html"])
                                repliesContainer.innerHTML = data["updated_replies_html"]
                                
                                
                                
                                
                                                                           
                                console.log("hey man what you doin")
 const likereplysuggest = document.querySelectorAll('.like-reply-comment-form');

 likereplysuggest.forEach(form => {
     form.addEventListener('submit', function(event) {
         event.preventDefault();

         const formData = new FormData(form);
        
         fetch('{% url "blog_home:likecomment" %}', {
             method: 'POST',
             body: formData,
             headers: {
                 'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
           
             }
         })
         .then(response => response.json())
         .then(data => {
             // Update the like count on the page
             console.log(data.likes)
         
             // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
             const thumbsUpIcon = form.querySelector('.fas.fa-thumbs-up');
            //  console.log(fas)
             var likesCountElement4 = form.querySelector('.likes-count');

             

             likesCountElement4.textContent = data.likes;
             if (data.isliked==1) {
                 console.log("color blue")
                      thumbsUpIcon.style.color = "grey";
               }
               else{
                 console.log("color grey")
                 thumbsUpIcon.style.color = "blue";
               }
         });
     });
 });

                              
                                
                                
                                
                                
                                
                                
                                
                                
                                
                                // Assuming the server returns the updated HTML for replies
                            }
                        } catch (error) {
                            console.error(error);
                        }
                    });
                });
            });
        </script>
    </ul>
</div>

</br>     
</br>  
</br>  

</div>
  
<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->


        <script>
    //         const replyButton = document.getElementById('reply-btn');
    //         replyButton.addEventListener('click', () => {
    //             console.log("button is clicked")
    // });
            $(document).ready(function() {
                $('.reply-button').click(function() {
                    console.log("button is clicked")
                    var targetForm = $(this).data('target');
                    $(targetForm).slideToggle();
                });
            });
        </script>
             
        
 









        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const likeForms = document.querySelectorAll('.like-form1');
            
                likeForms.forEach(form => {
                    form.addEventListener('submit', function(event) {
                        event.preventDefault();
        
                        const formData = new FormData(form);
        
                        fetch('{% url "blog_home:likepost" %}', {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest',  // For Django to recognize AJAX request
                                'X-CSRFToken': '{{ csrf_token }}',     // Include CSRF token
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            // Update the like count on the page
                            console.log(data.likes)
                            const likeCountSpan = form.querySelector('.like-count');
                            if (likeCountSpan) {
                                likeCountSpan.textContent = data.likes;
                            }
                            // const thumbsUpIcon = likeButton.querySelector('.fas.fa-thumbs-up');
                            const thumbsUpIcon = document.getElementById('th1');
                            var likesCountElement = document.getElementById("likesCount");



                            likesCountElement.textContent = data.likes;
                            if (data.isliked==1) {
                                console.log("color blue")
                                     thumbsUpIcon.style.color = "grey";
                              }
                              else{
                                console.log("color grey")
                                thumbsUpIcon.style.color = "blue";
                              }
                        });
                    });
                });
            });
        </script>
         <script>
            document.addEventListener('DOMContentLoaded', function() {
                
            });
        </script>
</body>
</html>
