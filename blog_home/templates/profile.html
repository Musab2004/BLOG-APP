<!--Main Navigation-->
<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <!-- Font Awesome -->
<link
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
rel="stylesheet"
/>
<!-- Google Fonts -->
<link
href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
rel="stylesheet"
/>
<!-- MDB -->
<!-- <link
href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.css"
rel="stylesheet"
/> -->
</head>
<body>
    <!-- <script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"
></script> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

{% if messages %}
<div class="container fixed-top" style="margin-top: 5%;">
   {% for message in messages %}
   <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert" id="message_box">
       {{ message }}
       <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
   </div>
   {% endfor %}
</div>
{% endif %}


{% include 'navbar.html' %}
<section class="h-100 gradient-custom-2">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col col-lg-9 col-xl-7">
          <div class="card">
            <div class="rounded-top text-white d-flex flex-row" style="background-color: #000; height:200px;">
              <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px; ">
                <img src="{{user.profile_pic.url}}"
                  alt="Generic placeholder image" class="img-fluid img-thumbnail mt-4 mb-2"
                  style="width: 150px;height: 150px; z-index: 1">
               
               
             
             
                

                <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#personModal" style="z-index: 1;">
                    Edit profile
                  </button>
                  
               
                  




                <div class="modal fade" id="personModal" tabindex="-1" role="dialog" aria-labelledby="personModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="personModalLabel">{{ person.name }} Info</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                
                
                
                
                              <form method="post" action="{% url 'blog_home:editprofile' %}" enctype="multipart/form-data">
                
                <p class="text-center">ADD User</p>
                
                <div class="image-container text-center">
                
                <label for="imageInput"></label>
                <img src="{{person.profile_pic.url}}" id="previewImage12{{person.id}}" class="img-fluid" alt="Uploaded Image" style="border-radius: 50%; height: 100px; width: 200px;">
                <input type="file"  value="{{person.profile_pic}}" id="imageInput12{{person.id}}" name="profile_pic" class="d-none">
                </div>
                
                <script>
                myButton12 = document.getElementById('previewImage12{{person.id}}');
                inputImage12 = document.getElementById('imageInput12{{person.id}}');
                
                myButton12.addEventListener('click', function() {
                inputImage12.click();
                });
                
                inputImage12.addEventListener('change', function() {
                const file = this.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                const previewImage12 = document.getElementById('previewImage12{{person.id}}');
                previewImage12.src = e.target.result;
                previewImage12.style.display = 'block';
                };
                
                reader.readAsDataURL(file);
                });
                </script>
                
                <!-- Name input -->
                <div class="form-outline mb-4">
                <input type="text" id="registerName" name="name" class="form-control" value="{{person.name}}" />
                <label class="form-label" for="registerName"></label>
                </div>
                
                <!-- Age input -->
                <div class="form-outline mb-4">
                <input type="number" id="registerAge" class="form-control" min="0" name="age" 
                 pattern="[0-9]+" title="Please enter a valid numeric value" value={{person.age}} />
                <label class="form-label" for="registerAge"></label>
                </div>
                
                
                
                
                
                <!-- Email input -->
                <div class="form-outline mb-4">
                    <input type="email" id="registerEmail" name="email_address" class="form-control" value="{{ user.email_address }}" />
                    <label class="form-label" for="registerEmail">Email Address</label>
                </div>
                <div class="form-outline mb-4">
                    <input type="email" id="confirmEmail" name="confirm_email" class="form-control" />
                    <label class="form-label" for="confirmEmail">Confirm Email</label>
                </div>
                
                
                <!-- Password input -->
                <div class="form-outline mb-4">
                <input type="password" id="registerPassword12{{person.id}}" name="password" class="form-control" placeholder="New passwrod" required  />
                <label class="form-label" for="registerPassword">New password</label>
                </div>
                
                <!-- Repeat Password input -->
                <div class="form-outline mb-4">
                <input type="password" id="registerRepeatPassword12{{person.id}}" name="repeatpassword" class="form-control"  placeholder="New Confirm passwrod" required />
                <label class="form-label" for="registerRepeatPassword">New Confirm Password</label>
                </div>
                
                <!-- Checkbox -->
                <div class="form-check d-flex justify-content-center mb-4">
                <input class="form-check-input me-2" type="checkbox" value="" id="registerCheck12{{person.id}}" checked aria-describedby="registerCheckHelpText" required />
                <label class="form-check-label" for="registerCheck">
                I have read and agree to the terms
                </label>
                </div>
                
                <!-- Display password match message -->
                <div id="passwordMatchMessage12{{person.id}}" style="color: red;"></div>
                <div id="emailmesg" style="color: red;"></div>
                <!-- Submit button -->
                {% csrf_token %}
                <button type="submit" id="submitButton12{{person.id}}" class="btn btn-primary btn-block mb-3">Sign in</button>
                
                <script>
                
                
                
                
                
                function setupFormValidation(personId) {
                const passwordInput = document.getElementById(`registerPassword12${personId}`);
                const repeatPasswordInput = document.getElementById(`registerRepeatPassword12${personId}`);
                const passwordMatchMessage = document.getElementById(`passwordMatchMessage12${personId}`);
                const submitButton = document.getElementById(`submitButton12${personId}`);
                const termsCheckbox = document.getElementById(`registerCheck12${personId}`);
                
                repeatPasswordInput.addEventListener('input', () => {
                if (passwordInput.value === repeatPasswordInput.value) {
                passwordMatchMessage.textContent = 'Passwords match';
                passwordMatchMessage.style.color = 'green';
                } else {
                passwordMatchMessage.textContent = 'Passwords do not match';
                passwordMatchMessage.style.color = 'red';
                }
                checkFormValidity();
                });
                passwordInput.addEventListener('input', () => {
                if (passwordInput.value === repeatPasswordInput.value) {
                passwordMatchMessage.textContent = 'Passwords match';
                passwordMatchMessage.style.color = 'green';
                } else {
                passwordMatchMessage.textContent = 'Passwords do not match';
                passwordMatchMessage.style.color = 'red';
                }
                checkFormValidity();
                });
                termsCheckbox.addEventListener('change', () => {
                checkFormValidity();
                });
                
                function checkFormValidity() {
                if (passwordInput.value === repeatPasswordInput.value && termsCheckbox.checked) {
                submitButton.removeAttribute('disabled');
                } else {
                submitButton.setAttribute('disabled', 'true');
                }
                }
                }
                
                // Call setupFormValidation for each form instance
                setupFormValidation('{{person.id}}');
                </script>
             <script>
                const registerEmail = document.getElementById("registerEmail");
                const confirmEmail = document.getElementById("confirmEmail");
                const updateButton = document.getElementById("submitButton12{{ person.id }}");
                const emailMatchMessage = document.getElementById("emailmesg");
            
                function checkEmailsEquality() {
                    const emailValue = registerEmail.value.trim();
                    const confirmEmailValue = confirmEmail.value.trim();
            
                    if (emailValue === confirmEmailValue) {
                        emailMatchMessage.textContent = 'Emails match';
                        emailMatchMessage.style.color = 'green';
                        updateButton.removeAttribute("disabled");
                    } else {
                        emailMatchMessage.textContent = 'Emails do not match';
                        emailMatchMessage.style.color = 'red';
                        updateButton.setAttribute("disabled", "disabled");
                    }
                }
            
                registerEmail.addEventListener('input', checkEmailsEquality);
                confirmEmail.addEventListener('input', checkEmailsEquality);
            </script>
                
                </form>
                
                
                               
                               
                               
                               
                               
                               
                                <!-- Add more person information fields as needed -->
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                
                












              </div>
           
            </div>
            <div class="p-4 text-black" style="background-color: #f8f9fa;">
              <div class="d-flex justify-content-end text-center py-1">
                <div>
                  <p class="mb-1 h5">{{all_posts.all.count}}</p>
                  <p class="small text-muted mb-0">Blogs</p>
                </div>
             
              </div>
            </div>
            <div class="card-body p-4 text-black">
              <div class="mb-5">
                <p class="lead fw-normal mb-1">About</p>
                <div class="p-4" style="background-color: #f8f9fa;">
                  <p class="font-italic mb-1">{{session_user.name}}</p>
                  <p class="font-italic mb-1">{{session_user.email_address}}</p>
                  <p class="font-italic mb-0">{{session_user.age}}</p>
                </div>
              </div>
              <div class="d-flex justify-content-between align-items-center mb-4">
                <p class="lead fw-normal mb-0">Recent Blogs</p>
                <p class="mb-0"><a href="#!" class="text-muted">Show all</a></p>
              </div>
              <div class="row" id="postCards">
                {% for post in post_page %}
                <div class="col-md-6">
                  <div class="card"style=" margin-bottom: 4%;margin-top:15% width: 60%;height:300px">
                    <img src="{{ post.blog_title_image.url}}" class="card-img-top" alt="{{ post.name }}"  height="100"  style=" width: 100%; margin-left: 0%;">
            
                    <div class="card-body"style="text-align: center;">
                      <b class="card-title">{{ post.title }}</b>
                      <p class="card-text">{{ post.created_at.date }}</p>
                  
                      </br>
    
                      <button class="btn btn-primary" style="margin-top: 1;" data data-toggle="modal" data-target="#postModal{{ post.id }}">
                        <i class="fas fa-edit"></i> Go to your Blog
                      </button>
    
    
    
    
    
    </div>
</div>
</div>  
{% endfor %}
    
                
    
    
              <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                  {% if post_page.has_previous %}
                  <li class="page-item">
                    <a class="page-link" href="?page=1" aria-label="First">
                      <span aria-hidden="true">first</span>
                    </a>
                  </li>
                  <li class="page-item">
                    <a class="page-link" href="?page={{ persons_page.previous_page_number }}" aria-label="Previous">
                      <span aria-hidden="true">previous</span>
                    </a>
                  </li>
                  {% endif %}
            
                  {% for page_num in post_page.paginator.page_range %}
                  <li class="page-item {% if persons_page.number == page_num %}active{% endif %}">
                    <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
                  </li>
                  {% endfor %}
            
                  {% if post_page.has_next %}
                  <li class="page-item">
                    <a class="page-link" href="?page={{ post_page.next_page_number }}" aria-label="Next">
                      <span aria-hidden="true">next</span>
                    </a>
                  </li>
                  <li class="page-item">
                    <a class="page-link" href="?page={{ post_page.paginator.num_pages }}" aria-label="Last">
                      <span aria-hidden="true">last</span>
                    </a>
                  </li>
                  {% endif %}
                </ul>
              </nav>
            
            </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>





























  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


  <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
  <!-- Include Bootstrap JavaScript -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>\